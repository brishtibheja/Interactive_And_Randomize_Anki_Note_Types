<div class="prettify-flashcard">

<div class="prettify-deck">{{Subdeck}}</div> 

<div class="prettify-divider prettify-divider--answer"></div>

<div id="warning" class="warning">
  <button class="close" id="close">X</button>
  <h1>There is a new version of the note type</h1>
  <div class="center-text"><a href="https://ankiweb.net/shared/info/171015247">Click Here To download it</a>
  <p>If you don't want to be informed about updates click here: <input id="check" type="checkbox"></input></p>
</div></div>

  <div class="prettify-field prettify-field--front">

<div class="center-text">
<div id="hidden">{{cloze:Text}}</div>
<div id="target"></div>
</div>

</div>

<div class="row">
  {{#Tags}}
  <div class="prettify-tags">{{clickable:Tags}}</div>
  {{/Tags}}

<div class="reportIconContainer"><a href="https://github.com/Vilhelm-Ian/Interactive_And_Randomize_Anki_Note_Types/issues/new"><svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M13.1241 16.125C13.1241 15.8266 13.0056 15.5405 12.7946 15.3295C12.5836 15.1185 12.2975 15 11.9991 15C11.7008 15 11.4146 15.1185 11.2036 15.3295C10.9927 15.5405 10.8741 15.8266 10.8741 16.125C10.8741 16.4234 10.9927 16.7095 11.2036 16.9205C11.4146 17.1315 11.7008 17.25 11.9991 17.25C12.2975 17.25 12.5836 17.1315 12.7946 16.9205C13.0056 16.7095 13.1241 16.4234 13.1241 16.125ZM12.7371 7.365C12.7037 7.18058 12.6025 7.01534 12.4534 6.90183C12.3042 6.78832 12.118 6.73475 11.9314 6.75169C11.7447 6.76862 11.5712 6.85483 11.4449 6.99333C11.3186 7.13182 11.2488 7.31258 11.2491 7.5V12.75L11.2611 12.885C11.2945 13.0694 11.3957 13.2347 11.5449 13.3482C11.694 13.4617 11.8802 13.5152 12.0669 13.4983C12.2535 13.4814 12.4271 13.3952 12.5534 13.2567C12.6796 13.1182 12.7495 12.9374 12.7491 12.75V7.5L12.7371 7.365ZM11.9991 3C10.4377 2.99947 8.903 3.40519 7.54582 4.17727C6.18864 4.94936 5.05568 6.06125 4.25826 7.4037C3.46084 8.74615 3.0264 10.273 2.99762 11.8341C2.96884 13.3953 3.34672 14.9371 4.09412 16.308L3.02912 20.043C2.99165 20.1742 2.99065 20.313 3.02624 20.4447C3.06182 20.5764 3.13264 20.6959 3.23108 20.7903C3.32951 20.8847 3.45183 20.9505 3.58487 20.9806C3.71792 21.0107 3.85664 21.0039 3.98612 20.961L7.49312 19.7925C8.68841 20.4832 10.0266 20.8897 11.4041 20.9805C12.7816 21.0713 14.1616 20.844 15.4372 20.3162C16.7128 19.7884 17.8499 18.9742 18.7605 17.9366C19.6711 16.899 20.3308 15.6658 20.6886 14.3325C21.0464 12.9992 21.0926 11.6014 20.8238 10.2473C20.555 8.89323 19.9782 7.61914 19.1382 6.52362C18.2982 5.4281 17.2174 4.54051 15.9795 3.9295C14.7415 3.3185 13.3796 3.00046 11.9991 3V3ZM4.49912 12C4.49937 10.3359 5.05305 8.71915 6.07299 7.40426C7.09294 6.08938 8.52122 5.15104 10.133 4.73699C11.7447 4.32293 13.4484 4.45666 14.9758 5.11713C16.5033 5.7776 17.7676 6.9273 18.5699 8.38523C19.3722 9.84315 19.6668 11.5265 19.4074 13.1702C19.148 14.814 18.3493 16.3248 17.137 17.4648C15.9248 18.6048 14.3678 19.3092 12.7112 19.4672C11.0546 19.6252 9.39254 19.2278 7.98662 18.3375C7.89258 18.2779 7.78645 18.2399 7.67592 18.2265C7.56539 18.213 7.45325 18.2243 7.34762 18.2595L4.86062 19.089L5.62562 16.4175C5.6535 16.3191 5.66096 16.2161 5.64754 16.1147C5.63413 16.0133 5.60013 15.9158 5.54762 15.828C4.85898 14.67 4.49667 13.3473 4.49912 12V12Z"
            fill="#4B5563"
          />
        </svg>
      </a></div></div></div>

<script>
  // Split hierarchical tags
  var tagsContainerEl = document.querySelectorAll('.prettify-tags > *')
  if (tagsContainerEl.length > 0) {
    var tags = []
    tagsContainerEl.forEach((tagEl) => {
      tagEl.classList.add('prettify-tag')
      tags.push(tagEl.innerHTML)
      tags.forEach((tag) => {
        var childTag = tag.split('::').filter(Boolean)
        tagEl.innerHTML = childTag[childTag.length - 1].trim()
      })
    })
  } else {
    tagsContainerEl = document.querySelector('.prettify-tags')
    var tags = tagsContainerEl.innerHTML.split(' ').filter(Boolean)
    var html = ''
    tags.forEach((tag) => {
      var childTag = tag.split('::').filter(Boolean)
      html +=
        "<span class='prettify-tag'>" +
        childTag[childTag.length - 1] +
        '</span>'
    })
    tagsContainerEl.innerHTML = html
  }

  // Breadcrumbs to current deck
  var deckEl = document.querySelector('.prettify-deck')
  var subDecks = deckEl.innerHTML.split('::').filter(Boolean)
  html = []
  subDecks.forEach((subDeck) => {
    html.push("<span class='prettify-subdeck'>" + subDeck + '</span>')
  })
  deckEl.innerHTML = html.join('&nbsp;/&nbsp;')
</script>

<script>
  (() => {
    const VERSION = 1.0
    checkVersion()
    document.getElementById("check").addEventListener("click", () => noMoreUpdates())
    document.getElementById("close").addEventListener("click", () => close())



    let clozes = document.getElementById("hidden").innerHTML.split("|")
    let rng = Math.floor(Math.random() * clozes.length)
    localStorage.setItem("rng", rng)
    document.getElementById("target").innerHTML = clozes[rng]

    async function checkVersion() {
      let updates = localStorage.getItem("updates")
      let close = sessionStorage.getItem("close")
      if (updates || close) return
      let res = await fetch("https://raw.githubusercontent.com/Vilhelm-Ian/Interactive_And_Randomize_Anki_Note_Types/refs/heads/main/VERSION")
      let data = await res.text()
      if (VERSION < data) document.getElementById("warning").style.display = "block"
    }

    function close() {
      document.getElementById("warning").style.display = "none"
      sessionStorage.setItem("close", true)
    }


    function noMoreUpdates() {
      document.getElementById("warning").style.display = "none"
      localStorage.setItem("updates", true)
    }

  })()
</script>
